---
/**
 * Preguntas Frecuentes (FAQ)
 * - Sin React (usa <details>/<summary> nativos).
 * - Lee desde site.json (import * as siteData).
 * - Primer ítem abierto por defecto.
 */
import * as siteData from "../../site.json";
const data = siteData.faq;
---

<section id={data.id} class="relative">
  <div class="mx-auto max-w-4xl px-6 py-16 sm:py-20">
    <h2 class="text-center text-2xl sm:text-4xl font-extrabold tracking-tight text-slate-900">
      {data.title}
    </h2>

    <div class="mt-10 space-y-4">
      {data.items.map((item, idx) => (
        <details class="group rounded-2xl bg-[#F5FAFF] p-5 sm:p-6 ring-1 ring-slate-200">
          <summary class="flex cursor-pointer list-none items-start justify-between gap-4">
            <h3 class="text-base sm:text-lg font-extrabold text-slate-900">
              {item.q}
            </h3>
            <span class="mt-1 shrink-0 rounded-full border border-slate-300 bg-white p-1 text-slate-600 transition group-open:rotate-180">
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 15.5 6 9.5l1.4-1.4L12 12.7l4.6-4.6L18 9.5z"/>
              </svg>
            </span>
          </summary>

          <div class="mt-3 text-slate-700 leading-relaxed text-sm sm:text-base">
            {item.linkHref && item.linkText && (
              <a href={item.linkHref} class="text-sky-700 font-semibold underline underline-offset-4">
                {item.linkText}
              </a>
            )}
            <!-- Si la respuesta trae HTML, lo imprimimos tal cual; si es texto simple, también funciona -->
            <div class="mt-2 prose prose-slate max-w-none prose-p:my-3 prose-a:text-sky-700 prose-a:underline" set:html={item.a} />
          </div>
        </details>
      ))}
    </div>
  </div>

  <!-- Fondo muy sutil -->
  <div class="pointer-events-none absolute inset-x-0 bottom-0 -z-10 h-24 bg-gradient-to-t from-slate-50 to-transparent"></div>
</section>

<script is:inline>
  // Abre el primer <details> por defecto (sin depender de React)
  document.addEventListener('DOMContentLoaded', () => {
    const first = document.querySelector('#{data.id} details');
    if (first) first.setAttribute('open', '');
  });
</script>
